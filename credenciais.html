<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Credenciais</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<svg xmlns="http://www.w3.org/2000/svg" class="d-none"></svg>

<div id="navbar"></div>

<h1 style="text-align: center; margin-top: 0px; padding: 30px; background-image: url('img/backgroud-credi-hero.png');">
  Credenciais</h1>

<p style="text-align: center; padding: 20px; margin: 50px;border-radius: 15px; background-color: #ff5b1a35;">Tudo oque
  voce precisa saber sobre sua credencial, ou carteirinha.</p>

<div class="text-center my-4">
  <a href="#areaForms" class="btn px-4" style="background-color: #ff5b1a; color: white; border-radius: 8px;">
    Fazer minha Credencial
  </a>
</div>

<div id="areaAccordion"></div>

<img src="img/low-poly-grid-haikei.png" alt="Doc. Credenciais"
  style="width: 100%; height: auto; display: block; margin-top: 50px;">
  <p style="margin: 20px;"></p>

  <h1 style="color: #ff5b1a; text-align: center;">Pre-Cadastro e Cadastro </h1>

  <p style="margin: 25px;">O <strong>Cadastro online permite</strong> realizar o cadastro completo na plataforma. O <strong>pré-credenciamento</strong> é uma etapa anterior, onde você envia seus documentos e recebe um número de protocolo. Leve-o à unidade para validar os documentos e finalizar o cadastro rapidamente. Após o pré-credenciamento, você receberá um número de protocolo para apresentar na unidade em até 7 dias.</p>

  <p style="margin: 20px;"></p>

<div class="text-center my-4">
  <button class="btn" data-bs-toggle="modal" data-bs-target="#modalCredencial" data-tipo="pre"
    style="background-color: #ff5b1a; color: white; border-radius: 8px; margin-top: 20px;">
    Fazer Pré-Cadastro
  </button>

  <button class="btn" data-bs-toggle="0" data-bs-target="#modalCredencial" data-tipo="online"
    style="background-color: #ff5b1a; color: white; border-radius: 8px;margin-top: 20px;">
    Credencial Online
  </button>
</div>

<div class="modal fade" id="modalCredencial" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Título</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body" id="modalFormsContent">
        <!-- forms.html será injetado aqui -->
      </div>

    </div>
  </div>
</div>

<div id="areaForms"></div>

<div id="areaFaq"></div>

<div class="text-center mb-4" style="margin-top: 50px;">
  <a href="index.html" class="btn btn-outline-dark px-4">Voltar</a>
</div>



<div id="footer"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js">
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {

    // =========================
    // FUNÇÃO GENÉRICA DE FETCH
    // =========================
    function carregarHTML(caminho, destinoId) {
      fetch(caminho)
        .then(res => res.text())
        .then(data => {
          document.getElementById(destinoId).innerHTML = data;
        });
    }

    // =========================
    // CARREGAMENTOS INICIAIS
    // =========================
    carregarHTML("pages/faq-credenciais.html", "areaFaq");
    carregarHTML("pages/accordion-credenciais.html", "areaAccordion");
    carregarHTML("pages/navbar.html", "navbar");
    carregarHTML("pages/footer.html", "footer");

    // =========================
    // MENU LATERAL
    // =========================
    window.abrirMenu = function () {
      document.getElementById("menuLateral").style.width = "250px";
    }

    window.fecharMenu = function () {
      document.getElementById("menuLateral").style.width = "0";
    }

    // =========================
    // FUNÇÃO GERAR PROTOCOLO
    // =========================
    function gerarProtocolo() {
      const numero = Math.floor(100000 + Math.random() * 900000);
      return `PC-${numero}`;
    }

    // =========================
    // MODAL CREDENCIAL (SOMENTE PRÉ)
    // =========================
    const modal = document.getElementById("modalCredencial");

    if (modal) {
      modal.addEventListener("show.bs.modal", function () {

        fetch("pages/forms.html")
          .then(res => res.text())
          .then(data => {

            document.getElementById("modalFormsContent").innerHTML = data;

            const titulo = modal.querySelector(".modal-title");
            const areaPre = document.getElementById("areaPreCadastro");
            const areaOnline = document.getElementById("areaOnline");

            // Sempre abre como Pré-Cadastro
            if (titulo) titulo.textContent = "Pré-Cadastro";
            if (areaPre) areaPre.style.display = "block";
            if (areaOnline) areaOnline.style.display = "none";

            configurarEnvio();
            configurarPerfil();
          });
      });
    }

    // =========================
    // CONFIGURAR ENVIO
    // =========================
    function configurarEnvio() {

      const form = document.getElementById("formCredencial");
      const mensagem = document.getElementById("mensagemSucesso");
      const temDependente = document.getElementById("temDependente");
      const areaDependentes = document.getElementById("areaDependentes");

      if (!form) return;

      // Mostrar dependentes
      if (temDependente && areaDependentes) {
        temDependente.addEventListener("change", function () {
          areaDependentes.style.display = this.checked ? "block" : "none";
        });
      }

      // Envio
      form.addEventListener("submit", function (e) {
        e.preventDefault();

        const protocolo = gerarProtocolo();

        mensagem.innerHTML = `
        <div class="alert alert-success">
          <strong>Enviado com sucesso!</strong><br>
          Sua solicitação foi recebida.<br>
          Número de protocolo: <strong>${protocolo}</strong>
        </div>
      `;

        form.reset();

        setTimeout(() => {
          mensagem.innerHTML = "";
        }, 5000);
      });
    }

    // =========================
    // CONFIGURAR PERFIL (LISTA DOCUMENTOS)
    // =========================
    function configurarPerfil() {

      const tipoPerfil = document.getElementById("tipoPerfil");
      const listaDocumentos = document.getElementById("listaDocumentos");

      if (!tipoPerfil) return;

      tipoPerfil.addEventListener("change", function () {

        const documentos = {
          empregado: `
            <ul>
              <li>Documento de identificação</li>
              <li>CPF</li>
              <li>Foto de rosto recente</li>
              <li>Carteira de trabalho digital</li>
              <li>Último comprovante de remuneração</li>
            </ul>
          `,
          suspenso: `
            <ul>
              <li>Documento de identificação</li>
              <li>CPF</li>
              <li>Foto de rosto recente</li>
              <li>Carteira de trabalho digital</li>
              <li>Último comprovante de remuneração</li>
              <li>Termo de suspensão do contrato</li>
            </ul>
          `,
          desempregado: `
            <ul>
              <li>Documento de identificação</li>
              <li>CPF</li>
              <li>Foto de rosto recente</li>
              <li>Carteira de trabalho digital</li>
              <li>Validade da credencial: 24 meses após rescisão</li>
            </ul>
          `,
          estagiario: `
            <ul>
              <li>Documento de identificação</li>
              <li>CPF</li>
              <li>Foto de rosto recente</li>
              <li>Declaração de matrícula</li>
              <li>Termo de compromisso de estágio</li>
            </ul>
          `,
          aposentado: `
            <ul>
              <li>Documento de identificação</li>
              <li>CPF</li>
              <li>Foto de rosto recente</li>
              <li>CNIS</li>
              <li>Extrato do benefício</li>
            </ul>
          `,
          falecido: `
            <ul>
              <li>Certidão de óbito</li>
              <li>Documentação do trabalhador falecido</li>
              <li>Comprovação de parentesco</li>
            </ul>
          `
        };

        if (listaDocumentos) {
          listaDocumentos.innerHTML = documentos[this.value] || "";
        }
      });
    }

  });
</script>
</body>

</html>