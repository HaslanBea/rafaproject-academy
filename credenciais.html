<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Credenciais</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<svg xmlns="http://www.w3.org/2000/svg" class="d-none"></svg>

<div id="navbar"></div>

<h1 style="text-align: center; margin-top: 0px; padding: 30px; background-image: url('img/backgroud-credi-hero.png');">
  Credenciais</h1>

<p style="text-align: center; padding: 20px; margin: 50px;border-radius: 15px; background-color: #ff5b1a35;">Tudo oque
  voce precisa saber sobre sua credencial, ou carteirinha.</p>

<div class="text-center my-4">
  <a href="#areaForms" class="btn px-4" style="background-color: #ff5b1a; color: white; border-radius: 8px;">
    Fazer minha Credencial
  </a>
</div>

<div id="areaAccordion"></div>

<img src="img/low-poly-grid-haikei.png" alt="Doc. Credenciais"
  style="width: 100%; height: auto; display: block; margin-top: 50px;">

<div class="text-center my-4">
  <button class="btn" data-bs-toggle="modal" data-bs-target="#modalCredencial" data-tipo="pre"
    style="background-color: #ff5b1a; color: white; border-radius: 8px; margin-top: 20px;">
    Fazer Pré-Cadastro
  </button>

  <button class="btn" data-bs-toggle="modal" data-bs-target="#modalCredencial" data-tipo="online"
    style="background-color: #ff5b1a; color: white; border-radius: 8px;margin-top: 20px;">
    Credencial Online
  </button>
</div>

<div class="modal fade" id="modalCredencial" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Título</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body" id="modalFormsContent">
        <!-- forms.html será injetado aqui -->
      </div>

    </div>
  </div>
</div>

<div id="areaForms"></div>

<div id="areaFaq"></div>

<div class="text-center mb-4" style="margin-top: 50px;">
  <a href="index.html" class="btn btn-outline-dark px-4">Voltar</a>
</div>



<div id="footer"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js">
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {

    // =========================
    // FUNÇÃO GENÉRICA DE FETCH
    // =========================
    function carregarHTML(caminho, destinoId) {
      fetch(caminho)
        .then(res => res.text())
        .then(data => {
          document.getElementById(destinoId).innerHTML = data;
        });
    }

    // =========================
    // CARREGAMENTOS INICIAIS
    // =========================
    carregarHTML("pages/faq-credenciais.html", "areaFaq");
    carregarHTML("pages/accordion-credenciais.html", "areaAccordion");
    carregarHTML("pages/navbar.html", "navbar");
    carregarHTML("pages/footer.html", "footer");

    // =========================
    // MENU LATERAL
    // =========================
    window.abrirMenu = function () {
      document.getElementById("menuLateral").style.width = "250px";
    }

    window.fecharMenu = function () {
      document.getElementById("menuLateral").style.width = "0";
    }

    // =========================
    // MODAL CREDENCIAL
    // =========================
    const modal = document.getElementById("modalCredencial");

    modal.addEventListener("show.bs.modal", function (event) {

      const button = event.relatedTarget;
      const tipo = button.getAttribute("data-tipo");

      fetch("pages/forms.html")
        .then(res => res.text())
        .then(data => {

          document.getElementById("modalFormsContent").innerHTML = data;

          const titulo = modal.querySelector(".modal-title");
          const areaPre = document.getElementById("areaPreCadastro");
          const areaOnline = document.getElementById("areaOnline");

          if (tipo === "pre") {
            titulo.textContent = "Pré-Cadastro";
            areaPre.style.display = "block";
            areaOnline.style.display = "none";
          }

          if (tipo === "online") {
            titulo.textContent = "Credencial Online";
            areaPre.style.display = "none";
            areaOnline.style.display = "block";
          }

          configurarEnvio();
        });
    });

    // =========================
    // CONFIGURAR ENVIO
    // =========================
    function configurarEnvio() {

      const form = document.getElementById("formCredencial");
      const mensagem = document.getElementById("mensagemSucesso");
      const temDependente = document.getElementById("temDependente");
      const areaDependentes = document.getElementById("areaDependentes");

      if (!form) return;

      // Mostrar dependentes
      if (temDependente && areaDependentes) {
        temDependente.addEventListener("change", function () {
          areaDependentes.style.display = this.checked ? "block" : "none";
        });
      }

      // Envio
      form.addEventListener("submit", function (e) {
        e.preventDefault();

        mensagem.innerHTML = `
        <div class="alert alert-success">
          <strong>Enviado com sucesso!</strong>
          Sua solicitação foi recebida.
        </div>
      `;

        form.reset();

        setTimeout(() => {
          mensagem.innerHTML = "";
        }, 5000);
      });
    }

  });
</script>
</body>

</html>